# Dockerfile
# Start with an official Python image (3.11-slim is small and fast)
FROM python:3.11-slim 

# Set the working directory inside the container to '/app'
WORKDIR /app 

# --- Dependency Installation ---
# CRITICAL: Copy the 'requirements.txt' file you created and install all packages.
# This makes sure the container has Dagster, pandas, and the database connectors.
COPY requirements.txt .
RUN pip install -r requirements.txt 

# --- Code Copying ---
# Copy the rest of your project code (your assets.py, defs.py, etc.) 
# from your local directory into the container's /app directory.
COPY . . 

# --- Execution ---
# The default command to run when the container starts.
# 'dagster dev' starts the Dagster webserver and daemon, serving your code.
# This command is what makes the Dagster UI available.

# CMD ["dagster", "dev"]
ENTRYPOINT ["dagster", "dev", "-f", "/app/definitions.py", "--host", "0.0.0.0"]